<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <script async defer src="https://buttons.github.io/buttons.js"></script>

        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Streaming - Luos.io - Documentation</title>
        
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Luos official documentation pages">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" type="image/png" href="../../../favicon-luos.png">
        <!--<link rel="shortcut icon" type="image/png" href="../../../">-->
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../../src/_assets/css/custom.css">
        

        

        <!-- Chat Zoho -->
        <script type="text/javascript"> 
            var $zoho=$zoho || {};
            $zoho.salesiq = $zoho.salesiq || {widgetcode:"3527438c9fcafa0972a3a2576fae38964b4fe1b8f520ccf46ff8317a97584595", values:{},ready:function(){}};
            var d=document;s=d.createElement("script");
            s.type="text/javascript";
            s.id="zsiqscript";
            s.defer=true;
            s.src="https://salesiq.zoho.eu/widget";
            t=d.getElementsByTagName("script")[0];
            t.parentNode.insertBefore(s,t);
            d.write("<div id='zsiqwidget'></div>"); </script>

        <link href="../../../_assets/css/form.css" rel="stylesheet" type="text/css">
        <script src="../../../_assets/js/validation.js"></script>

    </head>
    <body>

            <!-- Provide site root to javascript -->
            <script type="text/javascript">
                var path_to_root = "../../../";
                var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
            </script>
    		
            <!-- Work around some values being stored in localStorage wrapped in quotes -->
            <script type="text/javascript">
                try {
                    var theme = localStorage.getItem('mdbook-theme');
                    var sidebar = localStorage.getItem('mdbook-sidebar');

                    if (theme.startsWith('"') && theme.endsWith('"')) {
                        localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                    }

                    if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                        localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                    }
                } catch (e) { }
            </script>

            <!-- Set the theme before any content is loaded, prevents flash -->
            <script type="text/javascript">
                var theme;
                try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
                if (theme === null || theme === undefined) { theme = default_theme; }
                var html = document.querySelector('html');
                html.classList.remove('no-js')
                html.classList.remove('light')
                html.classList.add(theme);
                html.classList.add('js');
            </script>

            <!-- Hide / unhide sidebar before it is displayed -->
            <script type="text/javascript">
                var html = document.querySelector('html');
                var sidebar = 'hidden';
                if (document.body.clientWidth >= 1080) {
                    try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                    sidebar = sidebar || 'visible';
                }
                html.classList.remove('sidebar-visible');
                html.classList.add("sidebar-" + sidebar);
            </script>

    		<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    			<div id="sidebar-scrollbox" class="sidebar-scrollbox" style="padding-top: 100px;">
    				<ol class="chapter"><li class="chapter-item affix "><a href="../../../index.html">Home</a></li><li class="chapter-item "><a href="../../../pages/overview/general-basics.html"><strong aria-hidden="true">1.</strong> Basics</a></li><li class="chapter-item expanded "><a href="../../../pages/low/low-level.html"><strong aria-hidden="true">2.</strong> Low level</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/low/dev-env.html"><strong aria-hidden="true">2.1.</strong> Development environment</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/low/dev_env/general-integration-consideration.html"><strong aria-hidden="true">2.1.1.</strong> General integration</a></li><li class="chapter-item "><a href="../../../pages/low/dev_env/platformio.html"><strong aria-hidden="true">2.1.2.</strong> PlatformIO</a></li><li class="chapter-item "><a href="../../../pages/low/dev_env/arduino.html"><strong aria-hidden="true">2.1.3.</strong> Arduino</a></li></ol></li><li class="chapter-item "><a href="../../../pages/low/hardware-topics.html"><strong aria-hidden="true">2.2.</strong> Hardware Topics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/low/hardware_topics/minimal-requirements.html"><strong aria-hidden="true">2.2.1.</strong> Minimum Requirements</a></li><li class="chapter-item "><a href="../../../pages/low/hardware_topics/electronic-design.html"><strong aria-hidden="true">2.2.2.</strong> Electronic design</a></li><li class="chapter-item "><a href="../../../pages/low/hardware_topics/luos-hal.html"><strong aria-hidden="true">2.2.3.</strong> Use of Luos HAL</a></li></ol></li><li class="chapter-item expanded "><a href="../../../pages/low/containers.html"><strong aria-hidden="true">2.3.</strong> Containers</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/low/containers/create-project.html"><strong aria-hidden="true">2.3.1.</strong> Create Luos projects</a></li><li class="chapter-item "><a href="../../../pages/low/containers/create-containers.html"><strong aria-hidden="true">2.3.2.</strong> Create Luos containers</a></li><li class="chapter-item "><a href="../../../pages/low/containers/od.html"><strong aria-hidden="true">2.3.3.</strong> Object dictionary</a></li><li class="chapter-item "><a href="../../../pages/low/containers/routing-table.html"><strong aria-hidden="true">2.3.4.</strong> Routing table</a></li><li class="chapter-item "><a href="../../../pages/low/containers/msg-handling.html"><strong aria-hidden="true">2.3.5.</strong> Messages handling</a></li><li class="chapter-item "><a href="../../../pages/low/containers/self-healing.html"><strong aria-hidden="true">2.3.6.</strong> Self-healing</a></li><li class="chapter-item expanded "><a href="../../../pages/low/containers/streaming.html" class="active"><strong aria-hidden="true">2.3.7.</strong> Streaming</a></li><li class="chapter-item "><a href="../../../pages/low/containers/rt-config.html"><strong aria-hidden="true">2.3.8.</strong> Real-time configuration</a></li><li class="chapter-item "><a href="../../../pages/low/containers/examples.html"><strong aria-hidden="true">2.3.9.</strong> Codes Examples</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../pages/high/high-level.html"><strong aria-hidden="true">3.</strong> High level</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/high/json-api.html"><strong aria-hidden="true">3.1.</strong> JSON API</a></li><li class="chapter-item "><a href="../../../pages/high/pyluos.html"><strong aria-hidden="true">3.2.</strong> Pyluos</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/high/containers_list/angle.html"><strong aria-hidden="true">3.2.1.</strong> Angle</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/color.html"><strong aria-hidden="true">3.2.2.</strong> Color</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/controller-motor.html"><strong aria-hidden="true">3.2.3.</strong> Controller motor</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/dc-motor.html"><strong aria-hidden="true">3.2.4.</strong> DC motor</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/distance.html"><strong aria-hidden="true">3.2.5.</strong> Distance</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/dxl.html"><strong aria-hidden="true">3.2.6.</strong> Dynamixel motor</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/gate.html"><strong aria-hidden="true">3.2.7.</strong> Gate</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/imu.html"><strong aria-hidden="true">3.2.8.</strong> IMU</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/light.html"><strong aria-hidden="true">3.2.9.</strong> Light</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/servo.html"><strong aria-hidden="true">3.2.10.</strong> Servo motor</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/state.html"><strong aria-hidden="true">3.2.11.</strong> State</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/stepper.html"><strong aria-hidden="true">3.2.12.</strong> Stepper motor</a></li><li class="chapter-item "><a href="../../../pages/high/containers_list/voltage.html"><strong aria-hidden="true">3.2.13.</strong> Voltage</a></li></ol></li><li class="chapter-item "><a href="../../../pages/high/ros.html"><strong aria-hidden="true">3.3.</strong> ROS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/high/ros/bike_alarm.html"><strong aria-hidden="true">3.3.1.</strong> ROS package example</a></li><li class="chapter-item "><a href="../../../pages/high/ros/ros1.html"><strong aria-hidden="true">3.3.2.</strong> Retrocompatibility with ROS 1</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../pages/demo_boards/demo-boards.html"><strong aria-hidden="true">4.</strong> Demonstration boards examples</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/demo_boards/electronic-use.html"><strong aria-hidden="true">4.1.</strong> Boards general use</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/quick-start.html"><strong aria-hidden="true">4.2.</strong> Quick start</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards-list.html"><strong aria-hidden="true">4.3.</strong> Boards list</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/battery-power-input.html"><strong aria-hidden="true">4.3.1.</strong> Battery power input</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/button.html"><strong aria-hidden="true">4.3.2.</strong> Button</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/controller-motor.html"><strong aria-hidden="true">4.3.3.</strong> Controller motor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/dc-motor.html"><strong aria-hidden="true">4.3.4.</strong> DC motor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/distance.html"><strong aria-hidden="true">4.3.5.</strong> Distance sensor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/dxl.html"><strong aria-hidden="true">4.3.6.</strong> Dynamixel motor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/gpio.html"><strong aria-hidden="true">4.3.7.</strong> GPIO</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/imu.html"><strong aria-hidden="true">4.3.8.</strong> IMU</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/jack-power-input.html"><strong aria-hidden="true">4.3.9.</strong> Jack power input</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/light.html"><strong aria-hidden="true">4.3.10.</strong> Light sensor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/led-strip.html"><strong aria-hidden="true">4.3.11.</strong> LED strip</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/potentiometer.html"><strong aria-hidden="true">4.3.12.</strong> Potentiometer</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/power-isolator.html"><strong aria-hidden="true">4.3.13.</strong> Power isolator</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/powerpi.html"><strong aria-hidden="true">4.3.14.</strong> Power Pi</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/powerswitch.html"><strong aria-hidden="true">4.3.15.</strong> Power switch</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/rgbled.html"><strong aria-hidden="true">4.3.16.</strong> RGB LED</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/servo.html"><strong aria-hidden="true">4.3.17.</strong> Servo motor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/stepper.html"><strong aria-hidden="true">4.3.18.</strong> Stepper motor</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/usb.html"><strong aria-hidden="true">4.3.19.</strong> USB</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/wifible.html"><strong aria-hidden="true">4.3.20.</strong> Wifi BLE</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/wire-power-input.html"><strong aria-hidden="true">4.3.21.</strong> Wire power input</a></li><li class="chapter-item "><a href="../../../pages/demo_boards/boards_list/cables.html"><strong aria-hidden="true">4.3.22.</strong> Cables</a></li></ol></li></ol></li></ol>
    			<p style="marging-bottom: 40px;"><a class="cust_menu_item" href="https://www.luos.io" target="_blank">Go to Luos.io &#8599;</a></p>
               
                </div>


                <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
            </nav>

            <script src="https://kit.fontawesome.com/e122236495.js" crossorigin="anonymous"></script>

            <div class="cust_menu_container">

                <div class="cust_column cust_logo_container">
                    <a href="https://docs.luos.io/"><img src="../../../_assets/img/logo_luos_animated_white.gif" alt="Luos" id="logo" width="72px"></a>
                </div>

                <div class="cust_column cust_middle">

                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar"><i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                    </ul>
                    
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                    
                    <a href="../../../print.html" title="Print this documentation" aria-label="Print this book"><i id="print-button" class="fa fa-print" style="padding-left: 5px;transform: translate(0px,1px) scale(0.8);"></i></a>

                </div>
                <div class="cust_column cust_right">

                    <a title="" target="_blank" href="https://www.luos.io/#technology">Technology</a>
                    <a title="" target="_blank" href="https://www.luos.io/pricing">Pricing</a>
                    <a title="" target="_blank" href="https://www.luos.io/appstore">Appstore</a>
                    <a title="" target="_blank" href="https://www.luos.io/blog">Blog</a>
                    <a style="color: #bd99ff;">Docs</a>
                    <a title="Download on Github" target="_blank" rel="noopener noreferrer" href="https://github.com/luos-io">Download</a>                    
                    

                </div>
            </div>

            <div id="page-wrapper" class="page-wrapper">

                <div class="page">
                    

                    
                    <div id="search-wrapper" class="hidden">
                        <form id="searchbar-outer" class="searchbar-outer">
                            <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                        </form>
                        <div id="searchresults-outer" class="searchresults-outer hidden">
                            <div id="searchresults-header" class="searchresults-header"></div>
                            <ul id="searchresults">
                            </ul>
                        </div>
                    </div>
                    

                    <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                    <script type="text/javascript">
                        document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                        document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                        Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                            link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                        });
                    </script>

                    <div id="content" class="content">
                        <main>
                            <h1 id="streaming"><a class="header" href="#streaming">Streaming</a></h1>
<p>On occasion, you will have to deal with high-frequency small data with strong time constraints.</p>
<p>To make it easy, Luos manages streaming channels trough ring buffers.</p>
<p>A streaming channel allows you to drastically reduce the time constraints of your Luos network thanks to 2 factors:</p>
<ol>
<li>
<p>The first factor is a method which allows you to have a <em>no-real-time</em> container dealing with a strict-real-time one. Both sides have their own loop frequency and time precision.</p>
<ul>
<li>The real-time one is the container opening the streaming channel. It has a high-frequency function called at a precise <strong>sampling frequency</strong>.</li>
<li>The non-real-time one has a slower and unprecise timed function which is called at each <strong>chunk_time</strong>.</li>
</ul>
</li>
<li>
<p>By using streaming channels, you will be able to use big data chunks at low frequency to optimize the data rate efficiency of the bus. The idea is to exchange big chunks of data between containers instead of large amounts of time-constrained small messages flooding all containers.</p>
</li>
</ol>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<p>A motor-driver container has strict real-time constraints. If you want to have a smooth positioning movement or measurement you have to update the motor position at high-frequency (<strong>sampling frequency</strong>).<br/>
First, you have to define the <strong>sampling frequency</strong> allowing you to have a smooth movement or measurement on the motor. Let's take 200Hz in this example.</p>
<p>In the non-real-time side (the container commanding the motor), you can't have a 200Hz loop because it probably has other things to do and perhaps doesn't have a sufficient time precision. To simplify it you will have to send trajectory chunks regularly (<strong>chunk time</strong>), let's say approximately every 1 second.</p>
<p>Based on those numbers, your data chunk size will be:</p>
<pre><code class="language-AsciiDoc">chunk_size = chunk_time(s) x sampling_frequency(Hz)
chunk_size = 1 x 200 = 200 samples
</code></pre>
<p>In our configuration, data chunk needs to be 200 position samples each second, allowing to feed the streaming channel.</p>
<p>Following our example, if we want to send trajectory to the motor, we will have a <em>ring buffer</em> in the motor side managed by the <em>streaming channel</em>. Here are the different states of this ring_buffer:
<img src="../../../_assets/img/streaming.png"/></p>
<ol>
<li>The container who sends the trajectory has to make sure that the motor container always has data to consume. To do that you have to bootstrap your streaming flux by sending 2 data chunks to start and then send a new data chunk each <em>chunk_time</em>.
This way, the receiver always has at least one data chunk (1s in this example) ready to be consumed.</li>
<li>When data chunks are received, the receiver can start consuming data at its <em>sampling frequency</em>.</li>
<li>One data chunk later (1s in our example), the receiver has consumed the first data chunk, and the sender can start to compute the next one.</li>
<li>At the end of the data chunk computation, the sender sends the chunk. Luos adds it to the ring buffer.</li>
<li>At each second, the sender sends the next data chunk and Luos adds it to the ring buffer. At the end of the buffer, Luos puts extra data at the begining. The consumer pointer also goes back to the begining of the buffer when it reaches the end. This way we have infinite data stream without any discontinuity.</li>
<li>You can continue to do this indefinitely.</li>
</ol>
<blockquote>
<p><strong>Note:</strong> You can play, pause, stop or record a stream flux with the standard <strong>CONTROL</strong> command using the <strong>control_type_t</strong> structure.</p>
</blockquote>
<h2 id="how-to-use-it"><a class="header" href="#how-to-use-it">How to use it</a></h2>
<p><strong>A streaming channel is always created by the strict real-time container.</strong> The other container (the non-real-time one) will just send or receive its data chunks using <a href="./msg-handling.html#large-data">large data messages</a>.</p>
<h3 id="streaming-channel-creation"><a class="header" href="#streaming-channel-creation">Streaming channel creation</a></h3>
<p>Before starting to use the streaming method, you have to create a streaming channel linked to a buffer into the init function of your real-time container:</p>
<pre><code class="language-c">#define BUFFER_SIZE 1024
volatile angular_position_t trajectory_ring_buf[BUFFER_SIZE];
streaming_channel_t trajectory;

void Motor_Init(void) {
    trajectory = Stream_CreateStreamingChannel(trajectory_ring_buf, BUFFER_SIZE, sizeof(angular_position_t));
    Luos_CreateContainer(Motor_MsgHandler, CONTROLLER_MOTOR_MOD, &quot;motor_mod&quot;);
}
</code></pre>
<p>Now you can use this channel to receive or transmit a streaming flux:</p>
<ul>
<li><strong>reception</strong> is suited to make our motor move smoothly. A no-real-time container will send us parts of trajectory approximately each second and our motor will consume angular position at 200Hz.</li>
<li><strong>transmission</strong> is suited to measure precisely the movements of the motor. We can use it to send in a non-real-time way real-time data. In our motor it could be angular position measurement at 200Hz for example.</li>
</ul>
<h3 id="streaming-reception"><a class="header" href="#streaming-reception">Streaming reception</a></h3>
<p>This is used to make the motor move.<br/>
When your streaming channel has been created, you can feed it with received messages on your reception callback:</p>
<pre><code class="language-C">void Motor_MsgHandler(container_t *container, msg_t *msg) {
   // check message command
   if (msg-&gt;header.cmd == ANGULAR_POSITION) {
       // this is our trajectory reception
       Luos_ReceiveStreaming(container, msg, &amp;trajectory);
   }
}
</code></pre>
<p>Now your container is able to receive trajectory chunks. For the next step, you need to have a real-time callback (using a timer for example) which is able to manage the consumption of this trajectory at 200hz:</p>
<pre><code class="language-C">void 200hz_callback(void) {
    Stream_GetSample(&amp;trajectory, &amp;motor.target_angular_position);
}
</code></pre>
<h3 id="streaming-transmission"><a class="header" href="#streaming-transmission">Streaming transmission</a></h3>
<p>This is used to measure the motor movements.<br/>
To go the other way and send a sampled signal such as a position measurement, you have to use your streaming channel in reception.
First you have to put values into your streaming channel at 200Hz:</p>
<pre><code class="language-C">void 200hz_callback(void) {
    Stream_PutSample(&amp;trajectory, &amp;motor.angular_position);
}
</code></pre>
<p>This way, samples are buffered into your ring buffer, and you can send this real-time information as you want:</p>
<pre><code class="language-C">void Motor_MsgHandler(container_t *container, msg_t *msg) {
   msg_t pub_msg;
   // check message command
   if (msg-&gt;header.cmd == ASK_PUB_CMD) {
       // prepare a reply message and send
       pub_msg.header.target_mode = ID;
       pub_msg.header.target = msg-&gt;header.source;
       pub_msg.header.cmd = ANGULAR_POSITION;
       Luos_SendStreaming(container, &amp;pub_msg, &amp;measurement);
   }
}
</code></pre>
<p>The <code>Luos_SendStreaming</code> function sends available data on your streaming channel. You can continue to feed your channel with samples at the same time.</p>
<blockquote>
<p><strong>Warning:</strong> This example doesn't work if your container is configured as real-time. Please read <a href="./rt-config.html">Message Handling configuration page</a> for more informations.</p>
</blockquote>


                            <div class="cust_edit_page"><a id="gh_link">Contribute to this page</a>&nbsp;|&nbsp;<a id="feedback" class="cust_red_link" onclick="openFeedback()">This page wasn't helpful? &#128078;</a></div><div align="right" style="float: right; height: 30px; width: 400px; position: relative; top: -18px;"><a class="github-button" href="https://github.com/Luos-io" data-show-count="true" aria-label="Follow @Luos-io on GitHub">Follow @Luos-io</a>&nbsp;<a class="github-button" href="https://github.com/Luos-io/Luos/subscription" data-icon="octicon-eye" data-show-count="true" aria-label="Watch Luos-io/Luos on GitHub">Watch</a>&nbsp;<a class="github-button" href="https://github.com/Luos-io/Luos" data-icon="octicon-star" data-show-count="true" aria-label="Star Luos-io/Luos on GitHub">Star</a></div>

                            
                            <script language="javascript">
                                // Contribute to this page's href address
                                var page = window.location.pathname.slice(0, -4)+'md';
                                document.getElementById('gh_link').href = 'https://github.com/Luos-io/doc/tree/master/src'+page;
                                
                            </script>


                            <script language="javascript">
                                // Open the new window for feedback page
                                function openFeedback() {
                                  var myWindow = window.open("", "MsgWindow", "toolbar=yes,scrollbars=no,resizable=no,width=550,height=280");
                                  myWindow.document.write("<!DOCTYPE HTML><html><head><title>Luos documentation feedback</title><style>body{font-family: 'Roboto', sans-serif;} .zf-fmFooter .zf-submitColor{ font-size:14px; padding:4px 10px;}.zf-submitColor{ color: #fff; border:1px solid; border-color: #2F9EEC #1988D6 1988D6; background: #2596e6; background: -webkit-gradient(linear, left top, left bottom, from(#2f9eec), to(#1988d6)); background: moz-linear-gradienttop,  #2f9eec,  #1988d6); filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#2f9eec', endColorstr='#1988d6'); moz-box-shadow:0 1px 2px rgba(0, 0, 0, 0.15); -webkit-box-shadow:0 1px 2px rgba(0, 0, 0, 0.15); box-shadow:0 1px 2px rgba(0, 0, 0, 0.15); text-shadow:0 1px 0 rgba(0, 0, 0, 0.25);  } .zf-submitColor:hover{ background: #1988d6; background: -webkit-gradient(linear, left top, left bottom, from(#1988d6), to(#1988d6)); background: -moz-linear-gradient(top,  #1988d6,  #1988d6);   filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#1988d6', endColorstr='#1988d6'); }textarea#details_feedback{  width: 90%;  height: 100px;  padding: 12px 12px;  margin: 8px 0;  display: inline-block;  border: 1px solid #ccc;  border-radius: 4px;  box-sizing: border-box;}</style></head><body><div style=\"margin: 20px 0 20px 0; padding: 10px 20px 20px 20px; width: 90%; background-color: #efefef;\" id=\"feedback-block\"><form action=\'https://forms.zohopublic.eu/luosio/form/Thumbsurvey/formperma/BlTjwTQeX5v3FQDKFEHW5NNUgyllNOKxC-9a5miMlSw/htmlRecords/submit\' name=\'form\' method=\'POST\' onSubmit=\'javascript:document.charset=\"UTF-8\"; return zf_ValidateAndSubmit();\' accept-charset=\'UTF-8\' enctype=\'multipart/form-data\' id=\'form\'><input type=\"hidden\" name=\"zf_referrer_name\" value=\"\"><input type=\"hidden\" name=\"zf_redirect_url\" value=\"\"><input type=\"hidden\" name=\"zc_gad\" value=\"\"><div style=\"margin: 5px 5px 5px 0px; color: #333; font-size: 1.5em;\">Help us to improve our documentation.<\/div><div style=\"margin: 0 0 0 10px; padding: 0 0 0 15px; border-left: 2px solid #ccc\"<label style=\"color: #909090; font-size: 0.9em; font-style: italic;\">Add details to help us improve this page: <\/label><div><textarea id=\"details_feedback\" name=\"MultiLine\" checktype=\"c1\" maxlength=\"65535\"><\/textarea><p id=\"MultiLine_error\" style=\"display:none;\">Invalid value<\/p><\/div><label style=\"display:none;\">window.location.href <\/label><div style=\"display:none;\"><textarea id=\"pageLocation\" name=\"MultiLine1\" checktype=\"c1\" maxlength=\"65535\"><\/textarea><p id=\"MultiLine1_error\" class=\"zf-errorMessage\" style=\"display:none;\">Invalid value<\/p><\/div><button class=\"zf-submitColor\" style=\"margin-top: 12px;\">Submit<\/button><\/div><\/form><\/div><script type=\"text/javascript\">var zf_DateRegex = new RegExp(\"^(([0][1-9])|([1-2][0-9])|([3][0-1]))[-](Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec|JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[-](?:(?:19|20)[0-9]{2})$\"); var zf_MandArray = []; var zf_FieldArray = [ \"MultiLine\", \"MultiLine1\"];var isSalesIQIntegrationEnabled = false; var salesIQFieldsArray = []; document.getElementById(\'pageLocation\').value = window.location.href;<\/script></body>");
                                }
                            </script>


                            <br />

                                <!-- newsletter subscription -->
                                <iframe frameborder="0" style="height:200px;width:99%;border:none;" src='https://luos.maillist-manage.eu/ua/Optin?od=12ba7e1d8761&zx=14ac451cc1&lD=1b0211bfd6a6409&n=11699f74e8efc17&sD=1b0211bfd6dd285'></iframe>


                            <br />

                            <div class="cust_footer">
                                <p align="center">©2018-2020 <a href="https://www.luos.io">Luos.io</a></p>
                            </div>

                        </main>

                        <nav class="nav-wrapper" aria-label="Page navigation">
                            <!-- Mobile navigation buttons -->
                            
                                <a rel="prev" href="../../../pages/low/containers/self-healing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                    <i class="fa fa-angle-left"></i>
                                </a>
                            

                            
                                <a rel="next" href="../../../pages/low/containers/rt-config.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                    <i class="fa fa-angle-right"></i>
                                </a>
                            

                            <div style="clear: both"></div>
                        </nav>
                    </div>
                </div>

                <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    
                        <a rel="prev" href="../../../pages/low/containers/self-healing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a rel="next" href="../../../pages/low/containers/rt-config.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                </nav>

            </div>

            

            
            <!-- Google Analytics Tag -->
            <script type="text/javascript">
                var localAddrs = ["localhost", "127.0.0.1", ""];

                // make sure we don't activate google analytics if the developer is
                // inspecting the book locally...
                if (localAddrs.indexOf(document.location.hostname) === -1) {
                    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                    ga('create', 'UA-153509818-3', 'auto');
                    ga('send', 'pageview');
                }
            </script>
            

            
            
            

            

            
            <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
            <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
            <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
            

            <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
            <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
            <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

            <!-- Custom JS scripts -->
            

            


    </body>
</html>
